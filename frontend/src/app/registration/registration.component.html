
<div class="container mt-4">
  <div class="row">
    <div class="col-md-8 offset-md-2">
      <div class="card shadow">
        <div class="card-header bg-primary text-white">
          <h2 class="mb-0">User Registration</h2>
        </div>
        <div class="card-body">
          
          <form #registrationForm="ngForm" (ngSubmit)="onSubmit(registrationForm)">
            
            <!-- Basic Information Row -->
            <div class="row mb-3">
              <!-- Full Name -->
              <div class="col-md-6">
                <div class="form-group">
                  <label for="name">Full Name <span class="text-danger">*</span></label>
                  <input 
                    type="text" 
                    id="name" 
                    name="name" 
                    class="form-control" 
                    [(ngModel)]="userData.name" 
                    #name="ngModel" 
                    required
                    [ngClass]="{'is-invalid': name.invalid && (name.dirty || name.touched)}"
                  >
                  <div *ngIf="name.invalid && (name.dirty || name.touched)" class="invalid-feedback">
                    <div *ngIf="name.errors?.['required']">Name is required</div>
                  </div>
                </div>
              </div>
              
              <!-- Date of Birth -->
              <div class="col-md-6">
                <div class="form-group">
                  <label for="dob">Date of Birth <span class="text-danger">*</span></label>
                  <input 
                    type="date" 
                    id="dob" 
                    name="dob" 
                    class="form-control" 
                    [(ngModel)]="userData.dob" 
                    #dob="ngModel" 
                    required
                    [ngClass]="{'is-invalid': dob.invalid && (dob.dirty || dob.touched)}"
                  >
                  <div *ngIf="dob.invalid && (dob.dirty || dob.touched)" class="invalid-feedback">
                    <div *ngIf="dob.errors?.['required']">Date of birth is required</div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Username and Password Row -->
            <div class="row mb-3">
              <!-- Username -->
              <div class="col-md-6">
                <div class="form-group">
                  <label for="username">Username <span class="text-danger">*</span></label>
                  <input 
                    type="text" 
                    id="username" 
                    name="username" 
                    class="form-control" 
                    [(ngModel)]="userData.userName" 
                    #username="ngModel" 
                    required
                    minlength="3"
                    pattern="^[a-zA-Z0-9._-]{3,}$"
                    [ngClass]="{'is-invalid': username.invalid && (username.dirty || username.touched)}"
                  >
                  <div *ngIf="username.invalid && (username.dirty || username.touched)" class="invalid-feedback">
                    <div *ngIf="username.errors?.['required']">Username is required</div>
                    <div *ngIf="username.errors?.['minlength']">Username must be at least 3 characters</div>
                    <div *ngIf="username.errors?.['pattern']">Username can only contain letters, numbers, dots, underscores, and hyphens</div>
                  </div>
                </div>
              </div>
              
              <!-- Password -->
              <div class="col-md-6">
                <div class="form-group">
                  <label for="password">Password <span class="text-danger">*</span></label>
                  <input 
                    type="password" 
                    id="password" 
                    name="password" 
                    class="form-control" 
                    [(ngModel)]="userData.password" 
                    #password="ngModel" 
                    required
                    minlength="8"
                    [ngClass]="{'is-invalid': password.invalid && (password.dirty || password.touched)}"
                  >
                  <div *ngIf="password.invalid && (password.dirty || password.touched)" class="invalid-feedback">
                    <div *ngIf="password.errors?.['required']">Password is required</div>
                    <div *ngIf="password.errors?.['minlength']">Password must be at least 8 characters</div>
                  </div>
                  <small class="form-text text-muted">
                    Password must contain at least 8 characters with one uppercase letter, one lowercase letter, one number, and one special character.
                  </small>
                </div>
              </div>
            </div>
            
            <!-- Email and Gender Row -->
            <div class="row mb-3">
              <!-- Email -->
              <div class="col-md-6">
                <div class="form-group">
                  <label for="email">Email <span class="text-danger">*</span></label>
                  <input 
                    type="email" 
                    id="email" 
                    name="email" 
                    class="form-control" 
                    [(ngModel)]="userData.email" 
                    #email="ngModel" 
                    required
                    email
                    [ngClass]="{'is-invalid': email.invalid && (email.dirty || email.touched)}"
                  >
                  <div *ngIf="email.invalid && (email.dirty || email.touched)" class="invalid-feedback">
                    <div *ngIf="email.errors?.['required']">Email is required</div>
                    <div *ngIf="email.errors?.['email']">Please enter a valid email address</div>
                  </div>
                </div>
              </div>
              
              <!-- Gender -->
              <div class="col-md-6">
                <div class="form-group">
                  <label for="gender">Gender <span class="text-danger">*</span></label>
                  <select 
                    id="gender" 
                    name="gender" 
                    class="form-control" 
                    [(ngModel)]="userData.gender" 
                    #gender="ngModel" 
                    required
                    [ngClass]="{'is-invalid': gender.invalid && (gender.dirty || gender.touched)}"
                  >
                    <option value="" disabled selected>Select Gender</option>
                    <option value="MALE">Male</option>
                    <option value="FEMALE">Female</option>
                    <option value="OTHER">Other</option>
                  </select>
                  <div *ngIf="gender.invalid && (gender.dirty || gender.touched)" class="invalid-feedback">
                    <div *ngIf="gender.errors?.['required']">Gender is required</div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Address -->
            <div class="row mb-3">
              <div class="col-md-12">
                <div class="form-group">
                  <label for="address">Address <span class="text-danger">*</span></label>
                  <textarea 
                    id="address" 
                    name="address" 
                    class="form-control" 
                    rows="3" 
                    [(ngModel)]="userData.address" 
                    #address="ngModel" 
                    required
                    minlength="5"
                    [ngClass]="{'is-invalid': address.invalid && (address.dirty || address.touched)}"
                  ></textarea>
                  <div *ngIf="address.invalid && (address.dirty || address.touched)" class="invalid-feedback">
                    <div *ngIf="address.errors?.['required']">Address is required</div>
                    <div *ngIf="address.errors?.['minlength']">Address must be at least 5 characters</div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Contact and Pin Code Row -->
            <div class="row mb-3">
              <!-- Contact Number -->
              <div class="col-md-6">
                <div class="form-group">
                  <label for="contactNumber">Contact Number <span class="text-danger">*</span></label>
                  <input 
                    type="text" 
                    id="contactNumber" 
                    name="contactNumber" 
                    class="form-control" 
                    [(ngModel)]="userData.contactNumber" 
                    #contactNumber="ngModel" 
                    required
                    pattern="^[0-9]{10}$"
                    [ngClass]="{'is-invalid': contactNumber.invalid && (contactNumber.dirty || contactNumber.touched)}"
                  >
                  <div *ngIf="contactNumber.invalid && (contactNumber.dirty || contactNumber.touched)" class="invalid-feedback">
                    <div *ngIf="contactNumber.errors?.['required']">Contact number is required</div>
                    <div *ngIf="contactNumber.errors?.['pattern']">Contact number must be exactly 10 digits</div>
                  </div>
                </div>
              </div>
              
              <!-- Pin Code -->
              <div class="col-md-6">
                <div class="form-group">
                  <label for="pinCode">Pin Code <span class="text-danger">*</span></label>
                  <input 
                    type="text" 
                    id="pinCode" 
                    name="pinCode" 
                    class="form-control" 
                    [(ngModel)]="userData.pinCode" 
                    #pinCode="ngModel" 
                    required
                    pattern="^[0-9]{6}$"
                    [ngClass]="{'is-invalid': pinCode.invalid && (pinCode.dirty || pinCode.touched)}"
                  >
                  <div *ngIf="pinCode.invalid && (pinCode.dirty || pinCode.touched)" class="invalid-feedback">
                    <div *ngIf="pinCode.errors?.['required']">Pin code is required</div>
                    <div *ngIf="pinCode.errors?.['pattern']">Pin code must be exactly 6 digits</div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Profile Image -->
            <div class="row mb-3">
              <div class="col-md-12">
                <div class="form-group">
                  <label for="profileImage">Profile Image</label>
                  <input 
                    type="file" 
                    id="profileImage" 
                    name="profileImage" 
                    class="form-control" 
                    (change)="onFileSelected($event)" 
                    accept="image/*"
                  >
                  <small class="form-text text-muted">Optional. Maximum file size: 5MB.</small>
                </div>
              </div>
            </div>
            
            <!-- Submit Button -->
            <div class="d-grid gap-2 mt-4">
              <button 
                type="submit" 
                class="btn btn-primary btn-lg" 
                [disabled]="registrationForm.invalid || isLoading">
                <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                Register
              </button>
            </div>
            
            <!-- Login Link -->
            <div class="text-center mt-3">
              <p>Already have an account? <a routerLink="/login">Login</a></p>
            </div>
            
          </form>
          
        </div>
      </div>
    </div>
  </div>
</div>