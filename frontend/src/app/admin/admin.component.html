<!-- User Management Header
<div class="card mt-3 cards">
  <div class="card-header ">
    <h2>User Management</h2>
  </div>

  <div class="card-body d-flex justify-content-end mb-3">
    <button 
      mat-raised-button 
      color="primary" 
      (click)="openAddUserDialog()">
      <mat-icon>add</mat-icon> Add User
    </button>
  </div>


  <div class="card-body">
    <div class="row mb-3">
      <div class="col-md-6">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Items per page:</mat-label>
          <mat-select [(value)]="size" (selectionChange)="loadUsers()">
            <mat-option [value]="5">5</mat-option>
            <mat-option [value]="10">10</mat-option>
            <mat-option [value]="25">25</mat-option>
            <mat-option [value]="50">50</mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="col-md-6">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Search by Name:</mat-label>
          <input matInput [(ngModel)]="searchTerm" (input)="filterUsers()">

        </mat-form-field>
      </div>
    </div>
  </div>

  <div class="card-body table-responsive">
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Username</th>
          <th>Full Name</th>
          <th>Email</th>
          <th>Contact</th>
          <th>Gender</th>
          <th>Role</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of filteredUsers">
          <td>{{ user.userName }}</td>
          <td>{{ user.name }}</td>
          <td>{{ user.email }}</td>
          <td>{{ user.contactNumber }}</td>
          <td>{{ user.gender }}</td>
          <td>{{ user.accessRole }}</td>
          <td>
            <button 
              mat-icon-button 
              color="primary" 
              (click)="editUser(user.userName)" 
              matTooltip="Edit User">
              <mat-icon>edit</mat-icon>
            </button>
            <button 
              mat-icon-button 
              color="warn" 
              (click)="deleteUser(user.userName, user.accessRole)"
              matTooltip="Delete User">
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

 
  <div class="card-footer d-flex justify-content-between align-items-center">
    <button 
      mat-button 
      [disabled]="page === 0" 
      (click)="previousPage()">
      <mat-icon>chevron_left</mat-icon> Previous
    </button>
    <span>Page {{ page + 1 }}</span>
    <button 
      mat-button 
      [disabled]="!hasMoreUsers" 
      (click)="nextPage()">
      Next <mat-icon>chevron_right</mat-icon>
    </button>
  </div>
</div> -->

<!-- User Management Header -->
<div class="card mt-3 cards">
  <div class="card-header">
    <h2>User Management</h2>
  </div>

  <!-- Add User Button -->
  <div class="card-body d-flex justify-content-end mb-3">
    <button
      mat-raised-button
      color="primary"
      (click)="openAddUserDialog()">
      <mat-icon>add</mat-icon> Add User
    </button>
  </div>

  <!-- Search and Filter Controls -->
  <div class="card-body">
    <div class="row mb-3">
      <div class="col-md-6">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Items per page:</mat-label>
          <mat-select [(value)]="size" (selectionChange)="loadUsers()">
            <mat-option [value]="5">5</mat-option>
            <mat-option [value]="10">10</mat-option>
            <mat-option [value]="25">25</mat-option>
            <mat-option [value]="50">50</mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="col-md-6">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Search by Name:</mat-label>
          <input matInput [(ngModel)]="searchTerm" (input)="filterUsers()">
          <!-- <button mat-button matSuffix mat-icon-button>
            <mat-icon>search</mat-icon>
          </button> -->
        </mat-form-field>
      </div>
    </div>
  </div>

  <!-- User Table -->
  <div class="card-body table-responsive">
    <table class="table table-striped">
      <thead>
        <tr>
          <th>User</th>
          <th>Full Name</th>
          <th>Email</th>
          <th>Contact</th>
          <th>Gender</th>
          <th>Role</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of filteredUsers">
          <td>
            <div class="user-profile-cell">
              <!-- User profile image or initials -->
              <div class="user-avatar" *ngIf="user.profileImage; else initialsAvatar">
                <img [src]="user.profileImage" alt="Profile Image">
              </div>
              <ng-template #initialsAvatar>
                <div class="user-avatar-initials" [style.background-color]="getProfileColor(user.userName || user.name)">
                  {{ getInitials(user.userName || user.name) }}
                </div>
              </ng-template>
              <span class="user-name">{{ user.userName }}</span>
            </div>
          </td>
          <td>{{ user.name }}</td>
          <td>{{ user.email }}</td>
          <td>{{ user.contactNumber }}</td>
          <td>{{ user.gender }}</td>
          <td>{{ user.accessRole }}</td>
          <td>

            <button
              mat-icon-button
              color="primary"
              (click)="view(user.userName)"
              matTooltip="visibility">
              <mat-icon>visibility</mat-icon>
            </button>
            <button
              mat-icon-button
              color="primary"
              (click)="editUser(user.userName)"
              matTooltip="Edit User">
              <mat-icon>edit</mat-icon>
            </button>
            <button
              mat-icon-button
              color="warn"
              (click)="deleteUser(user.userName, user.accessRole)"
              matTooltip="Delete User">
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination Controls -->
  <div class="card-footer d-flex justify-content-between align-items-center">
    <button
      mat-button
      [disabled]="page === 0"
      (click)="previousPage()">
      <mat-icon>chevron_left</mat-icon> Previous
    </button>
    <span>Page {{ page + 1 }}</span>
    <button
      mat-button
      [disabled]="!hasMoreUsers"
      (click)="nextPage()">
      Next <mat-icon>chevron_right</mat-icon>
    </button>
  </div>
</div>